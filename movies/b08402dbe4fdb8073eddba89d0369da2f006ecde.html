<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"f2c895b1fa0a2b534e1e5c7988c1ae9955b4b080c7b8dc79f110a002abaec3a6bfc56ac9627f0f7ca539e9ff246b233ffe796feb45214493d468bab80a27398393e601ee5ffd294bcd0c962ac60d1869a1eafca91f169a1edbb0b8083951fb23ef66b7ddcab89d8181583705eb39e2b7798d22a33eecdf162d12ff6a70b12cd0030f94352bcd62b7c957a6bcaf2940a17a28e87b83ba3a85a532df3c15be983b96726f356f925ad5c6d791d0d513cae196b052ce65bf9fbbc35e23fc9b8dccd6f50302cc9d2704ca3186c77802cdb8385bc0316aa18db940c475da763217b2a91c72b830f60a08ea070df4bbe82d8df31ec88f9eb8640fce499a8afd6995d4d3ca4fd9dda4cb69812da616586ea91fdb1b0e1f72d7ec1cbdc75de011d4ac4da2dcdd34156c82f046b5fb90e7b3da9c1351ffdd54804338565396b313d9d61681ab6aa7df814b01059849cea43411ee3afe10690747b3bdb343be8d43926d1b822479a2094e7542a291ee45f280cb371ee1d32a745823190c43c9d4a957f654e2acaf1b277334180c96630cc20ab723c6b980c1007c30f684135e3e6592d3b50bfba8a38887e4f8977ec33e15d158f5d8841dedc9b94385e4e97b57f323b2743b29396108f7204991d554fc27eeb781bbe84e10f9790fb6945ffc0cd5b84c4292014f19958534b845e53e6a7d9dc867e291969db440adcc06fc24716462ea9101015d183911dfe82f9252fa40c30f5fa4bf9af01b7737e37a59fc345ecd48991643066b2c817664e819028e5236ae5dfb52d0acc5e477a83ebc09b00ca74f426d71a81e39fafe7421a22c8cdaadf765896b87fdc9686ce0c47bd651440b67692ba37d8b927b2cd51c264b8d78ea6bee8100a470432ea7a9e35c0aac5b6ec386ff199edd1611ec03a961c79e8a4da3c6ea43e0941b13ea560d88d27385ec62b5bd7b2e1d86e0432b86731b9ae83a0c169d26f29c4342bf703c906e097de028d5a13ebfa4dacbd8d2868762f608504e542e4bed42ec3eff35ac7b5ce0ba891f324653b4208a619f045372d27c35c35be51c01010e8a652a26ab5fff15066f27752e9330977141b55afbecae9640399222914c0635d87cc5a2256f607d358093d68d394d6e1e472c2c5d7806acf93fe87da19801def0b78e8d5503d6a998262116e6acefa23624de7c1ad761382ce4038fd2e48164e9770970f86eb6a2fd743e9646a9a2fb00f36f61c28956d16486e3b8c9e2c580ff8164f95c5dc5f1d346e2f7be34fd7a9361875670740bbc5ac4fd7c73699d19c5a2f70318ee4862a05293984a5de55ae8c5f5db3b49e3760b708baf7b6984bec432214929423cbd0d703e10c02341a0a4c04925492e23635bc136ac897285c73afccc02309e93d168618db91b26f84c5573487b2fdd6822b9ba6c390376e9bae8bffafa4fc94234dda9305efdba6107566b1afd567cc8ecd53655d39bb4d0da0adb033b0fac6f1aa03c74c56201816680507602c34cdebed609d769f1949781f1fb2725e3bab38ed8e00864f881c4c50ef7ff3a82946564ef80d8cca7c723e06703d591ee5832664d732852fa9b02edba17c6ca64e4d71cacad50901e53711c1fa131e9dd1bd00d6d0d9a1d07983e161aed0410f0bbaeb5b264f3500cef82b6a8f61e0d4df413d63fbdd90c60fefd146047107d106732fcda89edf599766593e7dbb1706664b2a381104d2d665abdc8c6908e32a18b57ba3e94bea092ed74d7e0903e2315b81a8a159f4b455364cb20d68a7f7f059a6eb0a9213caf24320e9f18ab6c98b2072051f768d9d992d233320cb4478acb3537b61a24584c924aaa88b2fef8bb073b3b143e456bd6267049572b4cf694b25c96ee5f0b18b542143bc998be4ef2cc3ab088c6d3dd88d0772c3d6d0816270679c8326d54209e7a6643796bbf9b8219fe51e728ced8b07090e9eded9a3038f518a041870b329dbb8dc206031e3d54beb779f383b983f090051b59b411c9de5ce478da2ee4523f24655f0a04bf762bc6ef41281e35dc78a7fd33379e78260b2421f7a025d717a75c86bc5bb2d0d7a8fbb4f8d5c54e174bef2fe2c5f36a0869363556e8a3d6c758c1cf3313cc11029ed0fbaa5df6f15e453e789335eaba526533e221913519a0c8a67230297d6e903a910e2aa94f756d7e59a1ef7a414905373c88cc3c9705ee313823a35350150da60ccca230da9e63dde8f8c6779852b975c2bddcdfff2245154e4b4cc56bad92f5bc1f9fe4a874ce761ab20bd1abc90ce3dedd41bc9ee2392e4bfa92033c78a79ec2784205b0490721827837829938b91a7fb980dfbbfe85bdf1a811c7ecb2b03ad148f6b9f6a5a9226269af7e4baac135408547028d7ce64b3e63728df31ef64df678964a82e318f75167c002fddacb71c34832f898bad92dc7166e84ba45d357442f499f15f8dd9d93964d41bf7b16572cdffbb9484ea8bbd651ed353941b8f5d7c026b5ac87fb547a80acf278e5de9e5396ae22e1377934e7e9faa3f817509f062b520fcf253cc5b127e2fe0a1d504cc044d8480276ef88f708f2ff0434062fe4fe028b4b569e87cc78f329f3a78028ed437dc223df2c7a57f4cb0ca7c7312a44d9c1a287ffbb7d27580a1b331ad25e7fc2670778254ce05633d2a5fc463c0ff197b8165a127c1d0dd5e9ebe6a876d771257a981ee4fb909341accf6979864e3172938ed9aeb632bae7457e5c0affb108a658fb6069410b44d3b1896fe927f9f41ec496753021ec9cd50f28efb9ea4185d626eb43e26635e5068e743f94d9cae7059b5e7219ad9fc8f83ec9bf3f4092a9ff7914fc49e72701e13a1bcc036fe5bc7a5d844548a0f70ecd9976d34fcba5ea56fb071e494cfee81f7ef96b22d93ded22094ea56771dde845ebd17f34b659577cc09841f730e3d690e9883173839d30f7ab5626614d5a06839506464a5fa86143a5f34f1d32dccde7f4070730e523f8491b9f3b5dbdf3bcf431175df1c095d6265d4312b5c5294e4db522722a319453e59689fad5f31c1e14ec35d759f543bea7e3c7bc58e14440d3e22b55f2e3f2fb3fb7758d7d5ae364a8eaf0c525532cbf9cb4f6fd652eee9fd5ea9ce281f40692c61d8dd21d8273cbc499c0ff7f7e4aedbd19c11b11b6eeb52e3994ed817bfc0bfe2eed52d1744cd8c900369d5383a08a757e8f852062aad3eae406eaf88baea46908a3d8566a31893589843da8ee4401cbd4bc5cd40526b032578d7dc39a1311c6f7777a09ff3c4a23b7e4a305f138bcd882640e6b76bdb2f727a979de1169af4591b8dfedb924100b6479efdf65e1e30ccd8e0abfb7702b7a5bd13b945048c1a92f2b3b7facb4fc8d363b8dcb4d4bb6d12b3115888a7044c550d56b913864310ffa22e432849659ecf93b5bedf72754654ac3d64df0a26dba26e371a3d531e2127427fdef7ecc6ef7f4fe81757404a226333078b704da0ffe57f3ec5c542dd653ade10252ba9d0367b777b021c893d787b53b92bf29e69343b79e50bf2cb3a80245ac71ca7d71196c9d1c75dd03277b30b3c66148453ebb728a24d373f8d9c4053ef85d0f098b1ae3760b6ce2c4ffb593b982741ae699edde4dc7db9278499da781792fd6a852d90ac88059f37504605eca21813220aa0ff79c8682d67a610e827a6492acc58a8b051fe8071fed4ce99262f4105b374ba504b7038da3197ddf51b7fa325a13a4d3f67dd35cfff85c158f4869e0682bfeae7372d4b7312811f50621505e707e79e66c0214d5f1578108531b27f6f75fb1942e78f4395a1b4dedecad2559cd1759b025bebe884a911507851c2eb9a324fe1bf8101f12b4201ed5947bcc55c6648b81ae38bf560554f23e6ff9bfc25eb4e1c8609a2fe6fb4f0f3ce5b137615d2cb902d7559295c7a6b7afa01d37b00453ed51e9e4d80baf75baa4cec726df0ef384dcc47b3c9c64bf5a96381f7e625ffcb38412b4106b1f04643591b3886e5fa0b12305d3613038431f8a1f78bb02d338ce65d0b0d4fa828ee886cfbaf937764af0b710c4e8988ba8091ac6dc0224b7b8dd41f614c8e49cb115c19e10373c059b17b718f43dd29fb07627b670c2223ee2ba91041678e48598d74e75c5ddec0bef91dfbce9023f452d0d7ce2256d7a744b5beab1703aeb3a6cd894c10dc31de0d558769765a92c385f142b4549d7550687573cb5b5eecc8cf29e6bc4bc55548d8c9092f896209a698e5b4c7e23622d7e2744f0d8d4ab63c1bfeda0bf88c85561e89ff18fa42e8bce99922756fb16547c6b91420bc1717cfd9b4c4d7ec06e4269b221a37557b89e0acf359424ff05ba2f9cf1431780492a568c7fbe018ea02211b11ea48a6ff34073153e8a1b905cc893d270e3804e6f31a9312d87b8a8fa36bee9119ae685e397dc4605f939e6216aab0f185628cef756137b05b42767443ee3368650c96d159bfd758111d89ef91a38789e3823f0577b8dc34b63672100517c171e261a4d67118c6d074f04f30b6d5b0c81102edc181c5505b5cc742c1d261b66e76f851a8ef657a336c62884df456721ae7c29c8aee2095f789dbc7bd4fadbe5525a38fc7eda07c3b0753141666b25427ba3b23e25adbcf7c0ab6fd46637a3aff860a11417a0e0566da01469616ddde34127367e9f537976f6b81818d9887bd930fdeb07e97eedd9b3c89520ef8b4aa163bbb31c922ed0a7c0d3f59c76516329a05cad6cb78ca004af26144b5ec5082d537203ebd5ffb058395d02d8ccd09de8d9b7e1b2c727f598e11f33a83363873d2ccf88aa18d5f7af768d0295e8e079e18a110423b5d3cc5f020129be6350559e86f5966ba523e15c172862dd05b57608e969c2472bffecd59677ef4a5430234f0aa54b22d5c3d94f6063a28e436304d44d6e135573b9b54147f671f63a9ddde15fb127398d95e4b7e652b919a610bdb6876898bc0eba75381961f77a0d7156663d277317cfae1b8f9ae06e79904614ac60b59263efcf800f5cc3aa1765d86d98037f763e8b40263302f9ae17b7e999765f42979e6ef6066f41a03166894039717834389521b434fdfb38eebe358ad77fbd6b7d8ffd2715ac2295563e75dad8db088079f2674bb0e0fb6d3554bb11fa39327d4261887ed47967925ede46da4c54edd951954788d92b5cd6104a07e56b1462098ef95cf72a1b6a2eb19686ee38fffff34aa93d88242c479c3f990fa5d053d07676b46ed4e7ac884e22b816a70b8afd8a42cf5ba72ac9c80aaf95516e602b22aad39b61db0f0c3c0fab1e6c4b1aafc09ecd3d2c0f341e6ddc885dbccb1837de89cf45aa18d75e685ff09be8ea9bcfae83cf41db79627162623af748bb707a965b9490ba2333e6f8157d55a81130fde8f3203f1e172f900e89b37b16b69b2f938f770df587c32d2db308f8b8559c99303cfd4b4fd6d09792e742cd8634c1c4cdbe41dcce11fdc49a919cd943d0e632e7cde0acd9bf8e4e3df3e332fa9c95b927bf6ac7b5b1aa0f506390014e671959e0c32a1d0b5038d4e26362a22dd0bed98f128a2417b4b76828c356536442f2ec24683f4cd6c785bf8bc7e99062b2532eb015638d7d68de673ca3549116e89f163dd9c6254fb2069a02b4b065f9e863c742520282fd9a337809a073cd34f50c0ce36d32284f52345e1406f9ab6d8d7ad4b5ce3a2aa809843ea240d4875b0176c8e4858cf15f92864e1af763c5ab980377efb39df6bfa640ce3e842581cc2f1d1b88fe4fffd48f6a962dddeafe3d351a044f25f2cc93d560d539f92d869ba3ad7c139c7859804c73427d5431c01bc5996d853da21e7da6a307be0e85efc387c606688f5ad8376cc87f1f91e44ee0491799ed1cbce1c229eb3b5666d4302771252d20b639fe8362a16b81c26f4828d2aa975597a5dabe91c8289d4d6358a5aa0e722b222eed971d8c5903b05d8906cb56e5f4b117e4d3ae24cc4e8c698f3401b38be00d867e47d3a0ba8d028b6b87ba9a32082ee100fd479907649444a40cd319962dcb437cd94a33fdd7c7c2a9c64fda78d166f6d9abde7b3c047ca9c8fa89e698d4b07081d7dd0bccaa5cc72bfb44d07f8955f2d8587d6f6f9a6400cf3b93710470401f2ef01dc7b54752af894bcfcb5fdec7c9eecb6bc61273d580bb73591962fbe99b6f27e9478eb277a102101ddf5c08d3f63bd747894d4a12e055d5f34fc15a09d0733cf5ad3c0a48891910d19720e10b4ef9f8be7b2cacd383a56626ef7dfb735446dd4d4bef00b450fb33d9f89fdd1305898acfdcfe98482e7d42d390a78eeecc0e481af97efc3dad85a2b900780ca6788b2c676ffd008a9ab9379d2eee60cd24e5d9b0dd01c4b6706d50156b70560e26228af8cf8f8998d96df0d716d7e2ba28734e73871483dbade96796c6b303adb6869fd75c20a64dbd24aa7243f129d3240dd64e45211f7140e979137f02bde6388f226a6eadc416b56c67e637b72c6d87fbd7c526cfad6ba194aa60df84c20069b8bf0fc7c1a5b00cbe186f3b602be91094ae320ec5b7962e801a394abd2b261a6dff63aaa9ce7a6f4476e7ddd5deeaacbe80b8eff7f0ca5b29841aaf53d95f996f6ce14f9e7e2c345f4da4dcc5a06534119137c919b9191a5829e120188637ea09fe5138a43c086da9bbd64883aac0e05c29895842fcf232fabfc51ff2a2e3bd2f91a74c089636fede9eb64efde7c3767b3da3fb01d39fd7dc32738f6161876e30f4ad3a05bc4c1ff0fded93fb4a20e1c277023569fa348adcc804e0d555cb04f1e596e91c55722db66747670a73d30ccc91de1a3db3dbb057be519f084eb5c5f77cf13defaa2588dbe5f417ba90ff99d4f5382f42781849a9ce2850bba94772e27b946f7e5f8e98d0f6807a853d7ffe0c9bd0a03ae9aa6598786a41a0b86da204e2ef6157c5d869a5feba7cab44269275ac080be992105126f10f6951cb0321c5d6afc11a490fe4b8a70b3a3f5f5a28b5b1b651745e6ad56764c6125a013e80a5867c9971fba7bd0acdd4a085197df5c1b2d0b123aece46cb0bce90e1c5509b80841fcd5443f673f7959dad2c89101837652100b11b60137963e618b6edbd1870a21f5127ba8b66dbf952502ab025565ba9f58befe4c00d65f68119f5f57ab8d60accede9f957602283ff46abea102a947530825eaedc87234af57bde3b7acdc81a649291ebd727d71e837e95ed39653a8f82310436f01cc37d0fa2c83bbf1ebe1ae2f43be4166c6d37aaa32fb88dcd4fdd6833bf9691765c834c1135e5439521d24451f5e8426dbe0ed9ff584e1f77dfcbaba782cebbe87cab076f3500d87b0fcd4680a3c11196b753418db08a0662a3f705e5fc7427121724f88be22d93f4a6e9f63bd3cd73ec53438bde1a5e7d0567f23f9d4baa6fafc5f0ab20ecde3556a916a9ae8bb250917a6e6491b0411f83dbf5622f7b8d8d1fa14591af3411255288862737a068c09cb4ea8fc35cd0f81fd5640a5cab1a49ba0490d160f558de26162735a56a107ecb4d4da259dc7e8d079ca1bf979fce2bdf9d823ce07de9927aca2be494978bb58bf48d854162533ed619daaf2bfa6e607b4128ffd302a3861fe198617862abad7d49d32214431c4389ef4c3a1d90bf9936e1914713a860ff9589f8dae22918b1db2854014858dfb73167ca5e053c4bc249f9f2aed7b9b67768ba8f653b125d3e0ca76adf951cf0e8aaf5a752aab517ee73b95073ac52022ff2e6fc2409fe6c6fafe23105aeaa143b3847c87cd591ba37d6b1afd4943820c727e7381f231eab91517a02ac3b3aac3834edd080dc805cdccbf639c04b1af00975a236a484ed8225284d9a509bcd93ae291331fe15ef76f8fa7b360285a5ca23def7c7d64a71ebb6aae792d45fa4747f01a4b21f142b43160ac0192d0ccc189cc234dc5f2be7b09cb49f52afa422433c8df601fbf9af5aa4c7c581f6fdb90c84a525bdc839bd386776be98e91069cd3d5f4faa245be184ef480a8a0fcccce2ade6bf3bf10adc3fe88c93ed78e9537181d2141bb87c612f8c2e4487656d7158406996b6cc9151ca5cdd4053551263dd737cc3e1f6efc90bb7291de89cd237133f1439dbf09d12ec66b2046a2d140767fefc6501047b479680a151c4f91db90737b3b99c63e6bb83448efb29c7c6ddcbebb0b9e892bff6a26f2ceee431ae90deec94d0fc895ae6c3bce7714b65672d59fb3c687d3eddf16036d661c1e32c3b6b6fd8f31b74504dfaa812ca0479705c187efafcec2bbed6e1b8277e66b7ad839fd483d606fb35e411fb99182a30433e71c2a2d669b578164b71662ae06fe20d3c31920c5448f1b2e3995260df3c0afd489ab3b3542ccd59a9a88e9a5f933ef6ec1d7af3b9abb1573b66770c57873be10d418f4d0426bac37eda4f1234eb27010368a66bee8bb327b2c93b711705d2e0f318aa5022e6a8b34d9454095eabd269a736d8ff1cdc84bfe58e62bc71eda84bd7fd0dac0c64a91834ed2b3f42511151d2e45477557d95cf7c3f5b7011ad2fa1f73ad01cee1470090763f414e54b0545be3c8aa1b2b90f59f550de2f42c85ef54bc974a9c04d1f3bfe49436dbfd87bc7c87ff75a266621b30573802d6a003fd2162fabbd711ca064079a024d009dda822a9facbfe7edae6cc3cd460eae6f94b4047c7e3d706e8e0e9611d83a3de495a575458500ea3d9c06f859267508fb7dbeaf91b2ad29107a399561b4b08e769c3403c48c408e1d0bc342f5b8216093a261c9abdb5a67be436298a74c03ea3d17765a2505552f26e05c255818ceef9569d028169730c3c63cf58f2f8976f701bf041a91be962043695416f9860bddaf11ceff84ef65b375a7b0b656c22ecbfa550149afca19e4e4c5192277e052cc14c97f2586419f3232a26d2fe9eaf5d57cd8f30cf67a35247e46d2547b746635221889841551e05cf5fed1189b4d0648a7f931fb14c054c7af28d765f9e84607f5aebe4aade27774d17a2fb7e029d86ad9e547f8dfe4109fc1a6c65c7b69a91a478eebd67dbeb3e63b53ecc9a810c927408dcc72d4e7d779e8d0a2d26333a63e34961126999315547c166d4bce9f6416c0fbf0d73eb542b1e08564564da6871de8452fc87ed38721823b1711efd38461e53fa812df289f207d2021eec368b767382505cddd6b4a521452d4ab53940ded2a79a2c4aa15c1bd17e2623dc74e1f06841909b72e635e965306ec154df9d522a61c78daf92531ac9153807b50af2d19942ec3e362b520508733b3c9514cab6f8a29a9cec890292122e57332cadc459377c9619585084629b86a934707570e35fff48487e0feaf7bbc19e6f2b1f5d74fba196d107301623cb59f27f6c9101c01de9ac25b8c296b42a0953148e6f65acc624d01c7173e46bc15d77a1c2022af4dedf3ea5088f1feb2fe70c23892fa1e1ffbda4cf1710c70649ba557eccbeca7775ca494206ca8513e359ad1896f911433e443ac302c71c9504c9f9fda622427e7e6dd2616a87b0378c322a1b385e57c7c6fa237df5db117a098778ff43df1692d1f9fe9d88171a64fb61000e22c86c86515cb51be9ae76e4a263237f9ea34c5c8e9df1b6d9f1b1958d4a878456071a24f95c777efdb711b04571faa1eaa36b12da6ce50c36f174eadbc538cab1693ba626970683bdb1ec3c3b2728b33c4f6a415bb7c330e601780369c3fb9dd9fa99bab4f14349ac8ad4ed9926ca1d239f93636aaf90c544d681ee8056baab8598f7f29d392a75e3450c5924c53535ec4e8c1507181ce9a2e7167c3038ccdd08012f887fb63ee3421e10358c48b8f4253f39988acca246e9653707e7dc75de8736dfc0832adbfe5326b2c2b53245ddb6817f57202fd890a9d239b9006c9d9e598219f4fef8d2c133b30eed2367185e58c1d7f97b2350c7957b6f939ecd1652164ce07c852a3cde05788913bdcea468c9b77dfa1ffbb8ab8ddc7a60e894d6ba899d319cc11a67a4d6e9c8834e2004a2ff585a10d9110f0e84448b58e9ca8daa2861135916e378d39372ed6e745bbd43826cc401227028bd2bef73ffa05fce9588acc4e5517a20676c78c7539b7fa5123640cec8bfb2f89eeb552230ca20c7c684b79d765d1112a0849797abb7c7213e94d9d0f5d02469b221831d5593eb71d4ee2cce9b3979a17af3d51b960800509d334ba6736d30f916b52f375d84146103ed67110bc9713e0ad441b3af5cb1c296ebe4cb7032ac0a2198b61693509e7ddbef38db0d8e28f2a395469d374bd8220cec479943ae57fd9d2f3b10b8f51b463f882ad73c6a6592bdb9a430c07a6655fc7341da2d477e282ca898758def6e0f56e583a84e70b105ad5a5f7ac4360e0cf06537629152cdff1b4211ebe01fef2c8a86a571e7d91641218f10e37afb09f87958e7ae4e6aa47b080c98b0739a4c58d105648a20f36b0977123a8a2aae4c982374ca7d4426414bbc789a4d230b91f8e9b7537ade0f024f6432e4142453c076d9d8983caecea2a9398040896a2eba94926ad9f95c8776a55832ff24779542fb4736cb29de254f861c05f3dcd27423028a6f0c7c37d614f27b60715ff92c28acfed437defde5f6c14774fd33e95679a86626e8b8287edd3d79baa2c4e65847e954e3e04e4bfce0eefd805ea6344d385bf878cb731ab058eb001b44099048ceddd0c3865c8a21df530f9ab53fd50461b3727936aa2511b8df1f7cf25c7612601af9a111d1fdfbda3e4b705c9e66d7346f716a75052001c9e345ec4c4e67ce9e6af749af43c49151d7abac534c18da5465409b98c0ad146298897cb2fb30e7e3928e159aea0e0a8e9530cf43432ee4d879b1a283943c5415cdee27ae9ec4ef5d740a085c7b96a098d9346988d0a682b7debf520c7d421badeb54d458c7e2eb1c3feea6742065c12849694218315a14c60a23cc3405c77877f786b14ebc373b1750e0dcb449a64a0355e61c968b6d0cd9e7e3bf3e25ee832a350138506a7239f9737fb2788d47ce6461ffc579ad86a8c989e8c60d008a1fd1c8a1d662b425d73af1eed72a6da78d911a37a02815be318c056d141ca62b393472769cd442a141584e6159f20c25f995dc85b6afdc8a809ab1c1f122b27f4426de67167188a23462ff74cff34bdb85dd816f4fbca06d0327b12474f810ad7de923436c43fe37c931e300971fd0593196f19d24b7b7148c930318f4fcff505128d20134366cc08548bf3f6d16be217156ef5735a271b1cc4bcb8ac37a2c7bb24ffdadf42bb33d3630eb88e6ab174beb062d27fd224752e5ec5c2c5aaca6866253a58c634572180209dcc7bb2ddf795ba5e5159853573d8fd35815af9b78b1bb1678e7c4b923c73aab31f6a56b7102e692a2c1c34d06a585eb610d0919936eda3b13fca09b65236a09086e16e8387d9a49d8369418cbe36c65b21800fd4e0821ff5cd265a46e2ea79a8f539bea60fc3f8931bb40c1699f6cc9c65d0a444a97ba8fc46faff8d43c810cb3f3ee0b9d9304206f1deea975d729e0e5507e7517bd455de78f605e08e44714d9987cb87d71647e990ca98ce72ab1c1f92eb3746c61cfb377bc882723d92652f5c9606d4745c972177b483a37224c2ce0ecf49e7bdbf7480c8f4f34a08488f8122f9ebdf81f95df3003bf666a3f2b6f843e7810c984c6c2de015fdadd19122784cddeabed128784f9623f3a6bfddbc5a834560da9884b439acd8944b93c7d6f2251d2e8cc9d83ee963c0281299619125f3ad868d0d849b2362e642f4a23c6cbeaf7a8a0b00fe470b8ed20b8f8eba0b34894e8069f66cbd3de40e6b1c101de599c35677a70bede06d98c62d8273fb84af276862010d1292964c4e17f906511c1cd8506b545f09576ce1a439dea83abdbceae6aaa8b1dfe0fe5098f396ae98f2b991bb35cac941dfe536e6a3ecbd43105380e1b39e76f54c25467fdac60036c9248109cd6e25812718f877eb5525fe186981a5d4c815089b0fc21be70f8fce006a7ce37cae5ccb53351767150ac1e55697355f68e7c4b9d7526dd7ea85c791376b0bbba2425466ecc26bb701e506a1f9461df8766a35e3946a2154071b254458c02b166c50b3be835c50541624d791e252e35921480f75f34783c118bef76e82dfd75af81fdd790f02d1a055d5a105e369374be9038fdec4ade8c02b639d1278668e0c8a207d09c5e141c50bda07d3cfaed3b8be33e34b7b2b242edfa0b9b8811ab943a6306216b71a1636e8396c66e4d77c1b10f3e90de7513e79e9954738a2db5474860707237f40b385de221396f426478c14111dd8dea12bb45f5cf8a43a7fa456c004bc36ae3ab0cd65ee10c6e01f65548f8876022e2a89caf667670c37a970e274b68148a03d74240abcfc5a32235ac45538e93e66f68f408f473f0cab6142c7b355db11d32987e5b350609054f07dab07920df11388af7a055307abbc866b12e39c4df97b6a9d14e7c1a1c01d68152bdb799f0b4c6c436083988699a53f4396d52da63ae09b80747be26471d82ca407f98ebbac731abeefd367e80727122c7609d614602e49c387e5667768b69d8b0c37620e8541f6854af8e54e8bdd760fadae7e087c68722f040ec74294647315543813a3ca076cadd7181aee6750a20a1a1ae614a8721fd27a4afdb424c79889b5a87b228eb03eb66831df7643575445761bcdb7ee0a8a05271caf7639470e7d2380d362b41fda535b8788763d02e93661a9989d0f3e2ec9806119664d541899a2e8f6f3a162a03a61c4d9bfe0723ee30f85f8e8150edb0744c87eb77b1afbcfefc645e2ef041be883686f7639e5ac96f1504633ba41a8162b7d903b48c3e252828f8123b6de693de95773e624d7ed9f0518efe2e384c112cd8dc92dbf6840d5923043d92f21121bcaccb4e2bb430c16060dc5e2b90f63ebd58433c61dd22b356c6df55fad5fac7b28e047d86115fb2e7d3eb83b1723e309faa6c001585dcd9810b3e839271a2d401dd3656c76fdabc3fa1bc06bb5a595a5c7d79c9d5b121da5a34fe0a70fac8e09a39596a0803a4a64ee8b977021a59d0de5c1912b379e0e1ce30b0dc9492684cff0b27f930c455972cc0bf7f53fe067312bcdc8942e84d7fd49c674ea12a020891eedf66249325e774cd41af1c4ce874c191d6feed6ffe9ee73597dd75adda0026e094e91c592be374e846b03c0d12bf474cbc4f0a2fc90a736a57006b283b8787789143299acb694dba23f40ce581956ef8c3d9c654d051aa6d6b65724a8387e7626696e3fe3b7edeceebc6ac382384906dbe6d213ca28bfa68e7d069a232df2cdebb549cf8a8563cf0092b8a5d6ea0fb6570cb2598ae0a86a203b5baf57c6118c83d4b695ba0f7eb8735c5de3f23c606382489e356da73d2a654c8a139e66ad576d4dfaf17fdd578445e31f32349684316a417baee7dba5cb9d76be9f437f6d70f5be1c7533a6be9db1e88075afaa6368557d0ace1e98dd6096d3282f3083c23d725449312eeeba4cc1ad178699df5929a3ec9fc6d0e8a66888446d972f4aa8d000929129f3e710cb4125af3ede915f7a06602aff4fd1371e6a1f09a5e193ce37cad88f1914f36a73b71ae545a8d957476af9575831f135d252f48b500c71539be26be5edefce1decfab19371d9247b15f117017ea6481a563a42b4c2503308b74b7644888245f5bfd365e09feeefbb986c5659cedbd7db17f1c1050b2e128024b7ae40dad6d49bba6c0addf6d77bc3494eda66dbb8bef4a3aa420956168e95cd799a00a7e17f0ca5a29ce1058f4ecced21c8eb3af94512fd320b1e1bad042bef13be9a084af11eefc2db23d871e6697e3242c71c22b921cacd39a4679fbc5a117ddd4c35269e2cf6110c4b741b8bf1eecb3ca8be0f2e2e35b38e0d872fe37f87949f0f23b4ed22000dfeb6d31984ddb0925ec216f57663c152f076a8af8b3cda223b775f7ee92af7bce2dd9bfda645b1c7d271d571b6d981f66c52ad852ff76ea97c2c20ace9da94b7c94b4bc2a0fbec11cb594bdc445a3832e1f8389b5bf392e0ace788b62a546d3edb4ad71f6cd1d57fea3c5a07559bf2e8b3141e9f15a84ba25d860bc03196ff7129b26b9157edaa3b8233a0167f49ea173d1d8124a156b556a9301acd8d31f59394613e8a04b58188ba23081e9c41983806de7263180650ae4022663547261312bc53eb4de3c581fe985fe884d814dd5de5ecd26d1bb7d42fe1b5e203158aef1f77b57b98f4bb67c94c33a6491fe785472b1f0abf4390f27b6286992ce99228d469595ed1b6451fb44bc767158fb6d9c371700f656b847bdc56aacda27162591c2c98c398314efb8cd35b6ead97a929647a3c00a8e561d665a0dcfed07d471ae4d7336630ae36a240178267bfae0c9f5a09d9890884ca3215d9986897197791dd96f2ed0cfb04840c891b0ce96ceb92edf8d3da28bce583501734900821d5c8d71a26fd2e9181826486d1e589570b0f9b70557e92f41e1529e4a1c77a36131552141af06a89522195ffc5341e70beb8b651878f06073cdad0b78611ba1ad2deab70b0e774dd412eb7e024a2cb0470fb7eda7923cd654d33bba0fa4a4e5551251098477d73b5da179c5241011177fb7686075a1944b723518fb93bb801ec0249529f87e318591e031d481629fd9ef2be5e34686dce260dbfdfac6e2ae3b5ccca7c4521dfbac7f4a0b948cf17d7cb87996dfd4a8ace41cb64c6c411a7c0456782932e742f979f4d16955855201f370cfb0e3c38904129d6d5cf24d72a76a67c86fdee0d67435098e3fc3cb63fc296582d05498a9bbf40b521bb4abffd96b05bad3a29585d0dcbce14d559e0fcb4d33b5e17dce119ff7cf8d25ca9b5bc68aefe1270a4e49a2a763085452a1e296794dbbd0c8a1e9e99cebedec573d595dba8ca51935a9895cf847aa26d3229d818c52dfbb9e03c22d27e85f989c94c6be4f248af2d3d7781972d62d8b7944166c712f796d5f04aadca5313118111b281e4b65ebbbc5efaa2f435dd52b739097993d7d878d8e1c163189ed54b06f7934434839e3ec22e0615ad612f29f57fc17158cc81e6c466e5623d4f3e16fe630903511879fc605ddaf16064a7637f1b2d89942792f02bdedee43bc50d181b77c5d9953ef4b4f37a52a2dce1dc145e12edf450899ef8586ef811329d19e28ffc6b5b290c1269fcb149405ee3c6f2cde647ef743f36d818d27f84c27071fc4d9b603942a88971737c079b787261d12ac603ce5b5dfff4a67e99747148287531bc13bc8e04bd3eafb5959f56954e3ec2fff40e46ffeeaca519c1dc96d7bf32634d6fb7ceee1eb3af82d92c9a6e7376c133adfca318040b71fc5bbdb7c18defab3dfd91b8730014621f34464f8753832702623e8a9cb8d71a26a12118dedf8c08cb174f149dc45359b105d10179b7e5f9a75861c6b6a417a89f31cdc6ccd1827836358b184d6109f22e0e66132a65dda3f46c64e3c692e1594391ada643c68d9082a0e5da626c35ef9d5d837d44b1b59c4b842e2516c528f961b603717d83ece3e2e9c2c8a4573bac856f4de6d1e6bd6dda94cd0d1005c985c20f4e43f30fd1040da8c5cb136822d90191040dba376f3e864f404e5a5bc28364415e1351ff731d5f3f1687c79a3658c8cd94d66cf9f9b138081120bc8cd7c1c56744cb064ada02964510e8c4daee8826fa7324e3525d8558fc5aa811655a879e2d86ef6eca2803a98dff8bf4a638afbcbad13ea383fac398aed44f84f8f108210d269e11c2453bccb9f12530e7584b954cf3fefa9fc601a603bbc9a58bcbcd3f88335cf051ac672b399d64f3add006290924297c29a37068c2a87175a4a0b4a9fd9df54d1caf00595aa23a9e1175ebd3cb6ea25120634f28142b14fa2cbcd59d7d9397d6cb23b6417a97779d729925ea27f37e3cd77a3e98d0062a4c3c5d6a5a38f7e16baeae9f540d7f58fb3798d13a362b50eda96d81ef51f21538fa0f6833d1789ad31cb84d0a4c870fec57e665aa444bb235d40b0c9bd33e7a7356f5b74d02af289ae7c06f55c515b8e04358b3dc538ac13e93b6659ca23ea89ec03d758e3a3f690a31ee2cf65a2f73e3b83fef00f7ffc72c88ddd1027382367e7eb953d3ccddb70fb77d9699c39ba1c8b30f62d0096bb1df3d3df358f50239785ac7eb2cc329276fbc4c59657b4cb71a51b253996b306eec75c0caf3c2289614b32e33b36a864ba849df6dfb7454a1f624dee452a2ea0d28505c30852824a0c22683f733fd9f6234195975d770a446d3b32b672bdb8bf9cd84eca5880c36daee03400a2cee3d9d555d5553b06c2b9f8917e824495e53d9491f5b3076e67707e4dcfda51ce38248a2f9f8d8fbe534b9254a928a43ec60c8643bb4193394a2ab26788d9ec0c6ab0edc9b26fd32e33de89090a1776938d0f26f2a046fcdf5ba89af21efa26ab02b3f1da5a5de87621badfe9efc432f8b7871026f345900781ed6171a2a83eae38faac321131b3e6724ed7acf7da1a83fdbc63f58412297fd1019f3199ae05e29c1e1f97423a1be7c3e77b6a54ce3c7bdf4fd49015606ca210bbc8c36f68a3747391c7d71b8dbb95efe99e55919dc9a837677e28711d2c50c188733ab67c696ee94e4947871b554dab8d5fc2ecde32654e5d1a6bcc7d9eb960aabb7f4ed6b6903562aa222e87876b289caeea58780155320d511692356648edaefff4f3929fa3347d59aaac4e8f3c39382360590f3ec1397b56ebc0b662a3f82ae854c109908cdf15ca7a1a8221d134c48cb097a796ec5866c3e772987cee97f29e45e16fafc744cbd2b245fcb84847389ebc42b08ec9b777117aba6f6f9171f0be904b7b7f8e60700868079eed6ac138572428301a3e6ba9b3c12f6850dfc39cdbe3227288c5f53dc5679902a23099de785bd2f7c495a59aa44d4e3e15855ae0d8d0358bd4390fd0d55d88411bd74f81cbdd9ed537f0453c860fe7a9a1e311a834ad6baadf6fb7a4568e58b4f0fe7ebe20400aef0e26aea97d4115f9fae12cdb1893480a64a4f4b069a42dde1e9161efc179bb5cb7145bc04c14dafbb646d7fb1fd78f9a2b37f1996f5d3969563527ed1da9718a6730cd280144f32cf45145e3fbe49f44ca2d5f26edd032acc9ba420360f24167f19169150ac681465157c453199bd379f7c8e1d39b1809a0389f6022073ee48ba1cc31e3b797d9aea2abe4e23e5b31cc0cf8aa52fec3d6439c62d0d897e31c0e1251e51900ec23a8aa1c9325d81d417ddac4088effb2a4d3bb2239a26d16d896f033326743338d6ab6ba4c54b83c7ba7d51489b07eac9494944afb72ab06bcc7f7227d458595f00ce3923408192bb88e9880421603db60bd39411cfccf234964f374b8e1c9d3c0afa484ad0b0d4abc8dfbef0f4131ff5b9f112cdba1fac8fdf25ed8ac5b2720eacde42d9dc255891c4e6400cc58d4e7b1f8f538a0be321f66a1ad37c29d3e857d63ca43598c2ffaefb0f2d0305742a3321df636564da141682dc400f71ef344b70e519e6803c796edf52b7c52ca8c5c2d4a5bd2ad965ce9412dfe6b7500c2c0e1db417003b41d6ccdc7ca050093e4b9918dd2c45a53b1b0d483f2aeb9fd17f5e8c0dee2b4ef600397585296ccf7772fcf20137c43af886926b709eb3ed81dbf6825090a316b6c8cc7c6cc908f929c60d40d896200b1071525303682d8521c67cb9c4f5b3532bea06bacae709626b4f1c1e7edbf623ef4e9de33e17780f139217f19acf61c62a32409a925ae3b5e6e24e42578d25ddad0924d28478d1237885d87e90ad41abb255f04f009bd571443b885893d609564975d7b150e1beb1aaa155474390a5d32ded72188a70f6ab2c4472353fff33b62d28e8ecfb42fc79ddb324a766d09021ac1244aeb2db0775d8bdd8ef164f9509fbf1151d37a4d5da1a9ae04f09b1277e631cb838916008a03e095cad6295a9ea56bc118dba8a8fc776b1d03b9345ce706816e452fc7236bd1d5845f6308959e1af33144da2c88d22bf0474e041da4c782da50b5a7d360ca412355053c3137115bede49b2b58dcbbf6fb0ee1101ddd535330d6428533ee963832300e4913a350d1ec8c4c0882999a1f990125e2dd81a86784781a13652de63647d985de5138f430758a522cb34277d1ccd1a7f6506863f061d8fc6af401985f31f30659ffff1486e3aae3823e8bfcd3bffd519bd9e26fbd82d62147b82b9cd1ed282498dee829072d83ec426a4e5e156d75749f036f24f106358429aeccdae35529ab0732baf4d123d583e9e64bdba5a71de393fa60ae1baf616958bc3e7dc51ce9a6e049d8b7147ab8f5187f976bcf1f2990df531225140cb7a1c6383a2b87beda3138ea2231dfc36f6dbbfe1395422e9f40e8dee5f09ca44f85b6801b7d7955eec716ba6b4b5aabcba9a32c16118dd7bd64dbc7b5e98fe19cf1af0555aba9db3fadf70e4e1d195d9d6d74123b50a2ee66b07ec089e2af1cd8d068dd3a34a225b629dbace6372c0afc28f9dc168587dfd7b20ee3e84fd8e8bffcebcddce1a4313897297fb6751bb907eb87fe2943e824acbbc067360c8249b9f87b01bb2365163a73c1fc8c59b3332a244d52e5cfc0bc519692951afe55feed3b5138bafc06ece2781d8e65c2d5f1d3408b5a32d4526240738cc9f8d6c3f287f582c747c3f56f3952346873bf8522ee10b4529e75036b57309e73792f29060ee38cdeda89892e700ec026b19689635d0687002d86bfa82076675366fefff9317899d30d63e1e41243bd7558e7df2668e6891f1513e8b7d6dc91603d4b8cd64641ec16bcd0dab06e431dfac7543d85ca6bca597833c675d70ec2b1df346a2d9382395ab348d8d5165644dcc6087a2018c3b66b71caf814051cf1704333c7376c71cd8c2917fea9ea898403d1873f464f91945df24df164ac4c5a8cced6a6e668b4e89742755da38ecfb25367b5ebb989ccca115b6b433275c19cd66cc222b705bd2abe08a4b91f2a06b92302fb48b097c1fd0bc04cd964aacee42aa78effbf77c1ce65166fa0fadfd0320d94c29a77083645f6caaa1c79e72a595a099aedccd647da011f907422d291a565b111cc3a916d330dc88debce9416e203bfae1c6068af65d79595c018ba3ef326e57cd0d9ffa1f9e1b78a5ba11c863a9ade2feb62ceda389a1e40bd1baca2e44d8f004b94832f993c127899280fc2faec80475d88882e5873862bbb96fbe1230ccf8c1b196391e134ffbcd724385aa368c2a94b8af6fd7616ef8de7a87d885c361656500392e3dac009a64cafdefd0ea576dddff8d5daba295ad23c4b206eaa7915852c9385d9a5a71aaee83fb314fbcd3d102b80c62da29f736c065fcc84617a63a46f457518863f540498daf954801095892b3771c5a2a7374add01427105e71609a82be76fc1381a1cb96da42eb601fe4ab5c65a43400d0953abd06b257545ad891e9777b59aafd263cb1ff64d8e80ef91b57032769a922b7d2207cf0bd9f8d4b558b5112cfc6781c86f5c82c2b22aef4d377bb141a99566a354f58f14da2623d1600e4781b1ea66f510ad977c7f33e9530263d8e67ded959b83f716f089f3f352466dc1e9011ac72aee9b9747f84dd4be5ca6c1137f492884692a48dc0126ddf2aab26200daf6006644117973ba67875c28c23311eb00a1b3f40a4079ec0391d02f6d6461801fbb31ac829e4d5a74a1ab8442984839c05d4603e6e19af8b47aa085346fd171ee2cc5cde2c8a4401542ba2d82e1b2619a3e83870957c13734387fcb09ede26d764af0283d1349644ba983d9ff18540c543ed3e004c518a22432f015755cb3eff9d346fec3656e7078f9c9c6ff45f1e844fa68de148825832a81e9d952d5cdcd538c1c08efccf8361578684e94377bb2bb1ddbb3ec13cb7d112ec41453cf35506f066250a04b42b8120682d7bb9ba5fe07cd0d7f5f662595bd4e0b93093a860b7909833027927b331490f3ab82f596fc69e929e54b1807e4c122c24e5faaed0d19ae9f6b10f209d9022e306603489b6089415c7150c6783f8","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"ab2beec4f19cdcf7b5c909265e03bcab"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
